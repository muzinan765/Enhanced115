# Enhanced115 插件说明

## 功能介绍

### 1. 多线程异步上传
解决MoviePilot原生115上传的单线程阻塞问题：
- 3-5个线程并发上传
- 独立上传队列，不阻塞整理
- 使用p115client专业库
- 支持秒传和分片上传

### 2. 增强资源缓存
扩展站点资源缓存：
- 容量从200条提升到1000条
- 智能排序（按发布时间降序）
- 自动去重合并
- 提高订阅匹配率

## 技术实现

### 事件拦截
- 监听 `TransferIntercept` 事件
- 拦截115上传操作
- 转入异步上传队列

### 并发处理
- `ThreadPoolExecutor` 线程池
- `queue.Queue` 任务队列
- 独立工作线程

### 缓存增强
- 监听 `SiteRefreshed` 事件
- 扩展原生缓存
- 智能策略管理

## 配置说明

### 必需配置
- **115 Cookies**：从浏览器获取（必填）
- **启用插件**：总开关
- **启用多线程上传**：上传功能开关

### 可选配置
- **上传线程数**：建议3-5
- **缓存容量**：建议1000
- **启用资源缓存增强**：缓存功能开关

## UI界面

### 配置页面
- VSwitch 开关组件
- VTextField 输入框
- VTextarea Cookie输入
- VAlert 提示信息

### 统计页面
- 上传统计卡片
- 缓存统计卡片
- 实时数据展示

## 依赖要求

```
p115client>=0.1.0
```

MoviePilot会自动检测并提示安装。

## 性能对比

| 指标 | 原生 | Enhanced115 | 提升 |
|------|------|-------------|------|
| 上传并发 | 单线程 | 3-5线程 | 300-500% |
| 队列阻塞 | 会阻塞 | 零阻塞 | 100% |
| 资源缓存 | 200条 | 1000条 | 5倍 |

## 日志示例

```
【Enhanced115】插件初始化完成
【Enhanced115】115登录成功，用户：xxx
【Enhanced115】上传队列已启动，线程数：3
【Enhanced115】文件已加入上传队列：电影.mkv
【Enhanced115】开始上传：电影.mkv
【Enhanced115】电影.mkv 秒传成功
【Enhanced115】上传成功：电影.mkv
```

## 常见问题

**Cookie失效：** 重新从115.com获取  
**上传失败：** 检查网络和Cookie  
**插件未启动：** 查看日志，检查依赖

## 版本

- 当前版本：v1.0.0
- MoviePilot版本要求：v2.8.5+
- Python版本要求：3.10+

---

完整说明查看项目根目录的 `README.md` 和 `使用教程.md`
